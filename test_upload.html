<!DOCTYPE html>
<html>
<body>
  <h2>Upload Media</h2>

  <form id="uploadForm" enctype="multipart/form-data" onsubmit="return false;">
    <input type="file" name="file" id="fileInput" required><br><br>
    <input type="text" name="user" id="userInput" placeholder="username" required><br><br>
    <button type="button" id="uploadBtn">Upload</button>
  </form>

  <h3>Response:</h3>
  <pre id="responseBox" style="background:#f4f4f4; padding:10px; border-radius:5px;"></pre>

  <script>
    const btn = document.getElementById("uploadBtn");
    const responseBox = document.getElementById("responseBox");

    btn.addEventListener("click", async () => {
      const file = document.getElementById("fileInput").files[0];
      const user = document.getElementById("userInput").value;

      const formData = new FormData();
      formData.append("file", file);
      formData.append("user", user);

      try {
        const res = await fetch("http://127.0.0.1:5000/upload", {
          method: "POST",
          body: formData
        });

        const json = await res.json();
        responseBox.textContent = JSON.stringify(json, null, 2);

      } catch (err) {
        responseBox.textContent = "Error: " + err;
      }
    });
  </script>
</body>
</html>
